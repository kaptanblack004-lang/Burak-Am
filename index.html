<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>BURAK AMðŸ˜†</title>
    <style>
        /* Mobil Zoom Engelleme ve Genel Reset */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; padding: 0; overflow: hidden; background: #000; 
            font-family: 'Arial Black', sans-serif; touch-action: none; 
        }
        canvas { display: block; margin: 0 auto; background: #000; }
        
        #ui-wrapper {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 100;
        }

        #score-now {
            text-align: center; color: white; font-size: 60px;
            margin-top: 20px; text-shadow: 0 0 20px #ff0055;
        }

        /* GAME OVER EKRANI - MOBÄ°L ODAKLI MERKEZLEME */
        #death-screen {
            display: none; position: absolute; top: 0; left: 0;
            width: 100%; height: 100%; background: rgba(0,0,0,0.9);
            pointer-events: auto; flex-direction: column;
            justify-content: center; align-items: center; padding: 20px;
        }

        #death-screen img { 
            width: 85%; max-width: 300px; border-radius: 15px; 
            border: 4px solid #ff0055; margin-bottom: 20px;
        }

        .final-info { color: #0ff; font-size: 24px; margin-bottom: 30px; }

        /* Ä°STEDÄ°ÄžÄ°N O MEÅžHUR BUTON - %100 Ã‡ALIÅžIR */
        #retry-action-btn {
            width: 90%; max-width: 350px; height: 100px;
            background: linear-gradient(45deg, #ff0055, #ff5500);
            color: white; border: none; border-radius: 20px;
            font-size: 22px; font-weight: 900; cursor: pointer;
            box-shadow: 0 8px 0 #903, 0 10px 30px rgba(255, 0, 85, 0.4);
            display: flex; justify-content: center; align-items: center;
            text-align: center; text-transform: uppercase;
        }
        
        #retry-action-btn:active { 
            transform: translateY(6px); 
            box-shadow: 0 2px 0 #903;
            background: #fff; color: #ff0055; 
        }
    </style>
</head>
<body>

<canvas id="mc"></canvas>

<div id="ui-wrapper">
    <div id="score-now">0</div>
    <div id="death-screen">
        <img src="https://i.imgur.com/GqDuolU.jpeg" alt="YandÄ±n">
        <div class="final-info">SKOR: <span id="final-pts">0</span></div>
        <button id="retry-action-btn">KAFASINI SÄ°KTÄ°ÄžÄ°M<br>TEKRAR DENE</button>
    </div>
</div>

<script>
const canvas = document.getElementById("mc");
const ctx = canvas.getContext("2d");
const scoreNow = document.getElementById("score-now");
const deathScreen = document.getElementById("death-screen");
const retryBtn = document.getElementById("retry-action-btn");
const finalPts = document.getElementById("final-pts");

// Ekran ayarlarÄ±
let w = window.innerWidth > 450 ? 420 : window.innerWidth;
let h = window.innerHeight;
canvas.width = w; canvas.height = h;

const bImg = new Image(); bImg.src = "https://i.imgur.com/9sZhySO.jpeg";

let bird, pipes, score, frame, active;
const g = 0.35, jump = -6.5;

function setup() {
    bird = { x: 50, y: h/2, w: 45, h: 45, v: 0 };
    pipes = []; score = 0; frame = 0; active = true;
    scoreNow.innerText = "0";
    deathScreen.style.display = "none";
}

function die() {
    active = false;
    finalPts.innerText = score;
    deathScreen.style.display = "flex";
}

function update() {
    if(!active) return;
    bird.v += g; bird.y += bird.v;

    if(frame % 90 === 0) {
        let gap = 180;
        let t = Math.random() * (h - gap - 200) + 100;
        pipes.push({ x: w, t: t, g: gap, p: false });
    }

    pipes.forEach((p, i) => {
        p.x -= 3.5;
        if(bird.x + 5 < p.x + 60 && bird.x + bird.w - 5 > p.x && 
          (bird.y + 5 < p.t || bird.y + bird.h - 5 > p.t + p.g)) die();
        if(!p.p && p.x < bird.x) { score++; p.p = true; scoreNow.innerText = score; }
        if(p.x < -80) pipes.splice(i, 1);
    });

    if(bird.y > h || bird.y < -100) die();
    frame++;
}

function loop() {
    ctx.fillStyle = "#000"; ctx.fillRect(0, 0, w, h);
    pipes.forEach(p => {
        ctx.fillStyle = "#ff0055";
        ctx.fillRect(p.x, 0, 60, p.t);
        ctx.fillRect(p.x, p.t + p.g, 60, h);
    });
    ctx.save();
    ctx.translate(bird.x + bird.w/2, bird.y + bird.h/2);
    ctx.rotate(Math.min(Math.PI/4, Math.max(-Math.PI/4, bird.v * 0.1)));
    ctx.drawImage(bImg, -bird.w/2, -bird.h/2, bird.w, bird.h);
    ctx.restore();
    update();
    requestAnimationFrame(loop);
}

// KRÄ°TÄ°K DÃœZELTME: Buton TÄ±klama OlayÄ±
retryBtn.addEventListener("pointerdown", (e) => {
    e.preventDefault(); e.stopPropagation();
    setup(); // Oyunu yeniden baÅŸlat
});

// ZÄ±plama KontrolÃ¼
const go = (e) => {
    if(!active) return;
    if(e.type === 'touchstart') e.preventDefault();
    bird.v = jump;
};

window.addEventListener("pointerdown", (e) => {
    if(e.target.id !== "retry-action-btn") go(e);
});
window.addEventListener("keydown", (e) => { if(e.code === "Space") go(e); });

bImg.onload = () => { setup(); loop(); };
</script>
</body>
</html>

